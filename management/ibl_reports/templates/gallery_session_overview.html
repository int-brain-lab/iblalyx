{% extends "admin/base_site.html" %}
{% load jobs_template_tags %}


{% block extrahead %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/simplelightbox/2.7.0/simple-lightbox.css" integrity="sha512-8WAX0xL/cHZ38RXoX2gtuqkAwmDVAzGwoFVmHvn46IDHGWOjTHx0vcl9OapNrfOzpFtql0SNkv+0y0b5Fm8ZkA==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplelightbox/2.7.0/simple-lightbox.min.js" integrity="sha512-ZajFBgnksNp8Rj+AbmYe8ueOu45HiSjtf3QpqnRbHlq719m6VK0FkbYIqQ8wEnlVuJ1i9pC+z6Z9ewmDnUTMCg==" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">


    <style>

        div.gallery img {
          width: 100%;
          height: auto;
          opacity: 1;
          display: block;
          transition: .5s ease;
          backface-visibility: hidden;
        }


        div.desc {
          padding: 15px;
          text-align: center;
        }

        * {
          box-sizing: border-box;
        }

        .responsive {
          padding: 0 6px;
          float: left;
          width: 24.99999%;
          position: relative;
        }

        @media only screen and (max-width: 700px) {
          .responsive {
            width: 49.99999%;
            margin: 6px 0;
          }
        }

        @media only screen and (max-width: 500px) {
          .responsive {
            width: 100%;
          }
        }

        .clearfix:after {
          content: "";
          display: table;
          clear: both;
        }

        div.gallery {
            position:relative;
        }

        div.gallery .middle {
          transition: .5s ease;
          opacity: 0;
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          -ms-transform: translate(-50%, -50%);
          text-align: center;
        }

        .text {
          color: gray;
          font-size: 16px;
          padding: 16px 32px;
        }

 .imagecard{
	margin-top: 0.5rem;
    text-align: left;
    position: relative;
    background: #fff;
    box-shadow: 12px 15px 20px 0px rgba(46,61,73,0.15);
    border-radius: 4px;
}

.imageicon .fa{
	position: relative;
    font-size: 100px;
    color: gray;
}

.imagecard .imageicon{
    padding-top: 50px;
    height: 200px;
    background-color: lightgray
}

.imagecard a {
    width: 100%;
    height: 100%;
    text-decoration: none;
    color: #525c65;
}

.imagecard h5 {
    color: #000000;
}


.imagecard:hover {
          -webkit-transform: scale(1.05);
          -moz-transform: scale(1.05);
          -o-transform: scale(1.05);
          -ms-transform: scale(1.05);
          transform: scale(1.1);
        }


    </style>
{% endblock extrahead %}

{% block content %}

<h2>Responsive Image Gallery</h2>
<div class="row">
    <div class="col">
	<div class="card card-body">
	<form method="get">
           {{photoFilter.form}}
        <button class="btn btn-primary" type="submit">Search</button>
	</form>
	</div>
    </div>
</div>


<div class="row">
    {% for plot, session in info|zip:sessions %}
            <div class="gallery">
            <div class="card my-2">
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-4"><h4>{{ session.id }} </h4></div>
                        <div class="col-md-4"><h4>{{ session|get_session_path }}</h4></div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        {% for key, value in plot.items %}
                            <div class="col-md-4">
                                <h5>{{ key }}</h5>
                                <div class="row">
                                {% for title, note in value.items %}
                                    <div class="col-md-4">
                                        {% if note == None %}
	                                            <div class="imagecard ">
                                                      <div class="imageicon">
                                                        <center><i class="fa fa-area-chart"></i></center>
                                                      </div>
                                                          <div class="card-body">
                                                              <h5>{{ title }}</h5>
                                                        </div>
                                                  </div>

                                        {% else %}
                                                    <div class="imagecard">
                                                        <a href="{{ MEDIA_ROOT }}{{ note.image.url }}">
                                                        <img class="card-img-top" src="{{ MEDIA_ROOT }}{{ note.image.url }}" title="{{ note.content_object }} {{ note.text }}">
                                                          <div class="card-body">
                                                            <h5>{{ title }}</h5>
                                                        </div>
                                                        </a>
                                                    </div>

                                        {% endif %}
                                    </div>
                                {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    {%  endfor %}
</div>

    <script>
        var gallery = new SimpleLightbox('.gallery a', {'captionPosition': 'outside'});
    </script>

<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?{% param_replace page=1 %}">&laquo; first</a>
            <a href="?{% param_replace page=page_obj.previous_page_number %}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?{% param_replace page=page_obj.next_page_number %}">next</a>
            <a href="?{% param_replace page=paginator.num_pages %}">last &raquo;</a>
        {% endif %}
    </span>
</div>

{% endblock content %}